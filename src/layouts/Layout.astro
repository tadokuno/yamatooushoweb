---
const { title = "やまと王将 - 将棋処", description = "神奈川県大和市の将棋処やまと王将。初心者から上級者まで楽しめる将棋道場です。毎週土日にトーナメント開催中。", image = "/images/yamatoosho.png", url = Astro.url } = Astro.props;

// Google Analytics Measurement ID（環境変数から取得、デフォルト値は設定例）
const GA_MEASUREMENT_ID = import.meta.env.PUBLIC_GA_MEASUREMENT_ID || 'G-XXXXXXXXXX';

// 構造化データ
const jsonLd = {
  "@context": "https://schema.org",
  "@type": "LocalBusiness",
  "name": "やまと王将",
  "alternateName": "将棋処 やまと王将",
  "description": description,
  "image": "https://yamatoosho.netlify.app/images/yamatoosho.png",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "深見西２丁目-１-２ ホソノビル 2F",
    "addressLocality": "大和市",
    "addressRegion": "神奈川県",
    "postalCode": "242-0018",
    "addressCountry": "JP"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": 35.474953441164075,
    "longitude": 139.45959901115296
  },
  "telephone": "090-8431-1107",
  "email": "yamatoousho@gmail.com",
  "url": "https://yamatoosho.netlify.app",
  "openingHours": ["Th 13:00-19:00", "Sa 12:00-19:00", "Su 12:00-19:00"],
  "priceRange": "$$",
  "category": "将棋道場",
  "sameAs": ["https://x.com/yamatoousho"]
};
---

<!doctype html>
<html lang="ja">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		
		<!-- SEO メタタグ -->
		<title>{title}</title>
		<meta name="description" content={description} />
		<meta name="keywords" content="将棋,将棋道場,大和市,神奈川,やまと王将,将棋処,トーナメント,初心者,上級者,習い事" />
		<meta name="author" content="やまと王将" />
		<meta name="robots" content="index, follow" />
		
		<!-- パフォーマンス最適化 -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="format-detection" content="telephone=no" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://www.googletagmanager.com" />
		<link rel="dns-prefetch" href="https://www.google-analytics.com" />
		
		<!-- OGタグ（SNSシェア用） -->
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
		<meta property="og:image" content={new URL(image, Astro.site)} />
		<meta property="og:url" content={url} />
		<meta property="og:type" content="website" />
		<meta property="og:site_name" content="やまと王将" />
		<meta property="og:locale" content="ja_JP" />
		
		<!-- Twitter Card -->
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@yamatoousho" />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		<meta name="twitter:image" content={new URL(image, Astro.site)} />
		
		<!-- 正規URL -->
		<link rel="canonical" href={url} />
		
		<!-- ファビコン設定 -->
    	<link rel="icon" type="image/x-png" href="/favicon.png" />
    	<link rel="apple-touch-icon" href="/images/apple-touch-icon.png" />
		
		<meta name="generator" content={Astro.generator} />
		
		<!-- 構造化データ -->
		<script type="application/ld+json" set:html={JSON.stringify(jsonLd)} />
		
		<!-- Google Analytics (GA4) -->
		{GA_MEASUREMENT_ID && GA_MEASUREMENT_ID !== 'G-XXXXXXXXXX' && (
			<>
				<script async src={`https://www.googletagmanager.com/gtag/js?id=${GA_MEASUREMENT_ID}`}></script>
				<script is:inline define:vars={{ GA_MEASUREMENT_ID }}>
					window.dataLayer = window.dataLayer || [];
					function gtag(){dataLayer.push(arguments);}
					gtag('js', new Date());
					gtag('config', GA_MEASUREMENT_ID, {
						page_title: document.title,
						page_location: window.location.href,
					});
				</script>
			</>
		)}
	</head>
	<body>
		<slot />
	</body>
</html>

<style>
	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
	}
</style>
